- name: vcst-qa
  gitops: true
  production: false
  servicePlan: B1
  platform:
    imageRepository: virtopaasregistrymain.azurecr.io/vcst/platform
    sqlReplica: false
    config:
      # Increment to force environment reload
      reload: 5
      # Application Insights settings
      APPINSIGHTS_INSTRUMENTATIONKEY: ef0125aa-1c8e-42d3-964f-d0a11256309d
      # Forward headers to Nginx
      ASPNETCORE_FORWARDEDHEADERS_ENABLED: true
      # Enable Azure Active Directory login in platform UI
      Authorization__AllowApiAccessForCustomers: true
      AzureAd__Enabled: true
      AzureAd__ApplicationId: 86d04c35-143d-4d3c-aea2-8608e2186282
      AzureAd__TenantId: bc03e660-5e3a-45c4-bf5c-b75489f78923
      AzureAd__ValidateIssuer: MultitenantAzureAD
      AzureAd__DefaultUserType: Customer
      #Default Store
      VirtoCommerce__Stores__DefaultStore: B2B-store
      # Allows to see theme in Content menu in platform UI
      Content__FileSystem__RootPath: /opt/virtocommerce/platform/wwwroot/cms-content
      Content__PathMappings__pages__0: Themes
      Content__PathMappings__pages__1: _storeId
      Content__PathMappings__pages__2: _theme
      Content__PathMappings__pages__3: content/pages
      Content__PathMappings__themes__0: Themes
      Content__PathMappings__themes__1: _storeId
      # Because cms-content is network share
      DOTNET_USE_POLLING_FILE_WATCHER: true
      # File Uploader settings
      FileUpload__RootPath: attachments
      FileUpload__Scopes__0__Scope: quote-attachments
      FileUpload__Scopes__0__MaxFileSize: 10485760
      FileUpload__Scopes__0__AllowedExtensions__0: .csv
      FileUpload__Scopes__0__AllowedExtensions__1: .docx
      FileUpload__Scopes__0__AllowedExtensions__2: .jpg
      FileUpload__Scopes__0__AllowedExtensions__3: .pdf
      FileUpload__Scopes__0__AllowedExtensions__4: .png
      FileUpload__Scopes__0__AllowedExtensions__5: .txt
      FileUpload__Scopes__0__AllowedExtensions__6: .xlsx
      # Send notifications via email
      Notifications__DefaultSender: azure_25da07ed75daacae20578a7a7dc58541@azure.com
      Notifications__Gateway: SendGrid
      Notifications__SmsDefaultSender: +17012510519
      # Sync push notifications between platform instances
      PushNotifications__ForceWebSockets: true
      PushNotifications__ScalabilityMode: RedisBackplane
      PushNotifications__HubUrl: https://vcst-qa.govirto.com/pushNotificationHub?api_key=458ab7f7-df17-4aed-9f21-092f8b611efa
      PushNotifications__RedisBackplane__ChannelName: vcst-qa-chanel
      # Firebase settings
      PushMessages__UseFirebaseCloudMessaging: true
      PushMessages__FcmSenderOptions__Type: service_account
      PushMessages__FcmSenderOptions__ProjectId: vcst-qa
      PushMessages__FcmSenderOptions__PrivateKeyId: 2d6bed5b992d4f7d52ec9e432e929083bb0d86fa 
      PushMessages__FcmSenderOptions__ClientEmail: firebase-adminsdk-1vh96@vcst-qa.iam.gserviceaccount.com
      PushMessages__FcmSenderOptions__ClientId: 111108068739348332191
      PushMessages__FcmSenderOptions__AuthUri: https://accounts.google.com/o/oauth2/auth
      PushMessages__FcmSenderOptions__TokenUri: https://oauth2.googleapis.com/token
      PushMessages__FcmSenderOptions__AuthProviderX509CertUrl: https://www.googleapis.com/oauth2/v1/certs
      PushMessages__FcmSenderOptions__ClientX509CertUrl: https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-1vh96%40vcst-qa.iam.gserviceaccount.com
      PushMessages__FcmSenderOptions__UniverseDomain: googleapis.com
      PushMessages__FcmReceiverOptions__ApiKey: AIzaSyAJLCGjYkqbbv8n8dvuXazURr8kz0GsuVo
      PushMessages__FcmReceiverOptions__AuthDomain: vcst-qa.firebaseapp.com
      PushMessages__FcmReceiverOptions__ProjectId: vcst-qa
      PushMessages__FcmReceiverOptions__StorageBucket: vcst-qa.appspot.com
      PushMessages__FcmReceiverOptions__MessagingSenderId: 1021404404978
      PushMessages__FcmReceiverOptions__AppId: 1:1021404404978:web:89ab011d054397a04d046b
      PushMessages__FcmReceiverOptions__VapidKey: BB1Pzs7sBeDkuQWO_cNzo3OhCEruXypVhFsKZaTN4FBL1JhC4fgsgsQSM-vusa99uYVpMcroJzhydyRfMkCQLHc
      # Return detailed error information if login failed
      PasswordLogin__DetailedErrors: true
      IdentityOptions__Lockout__MaxFailedAccessAttempts: 5
      IdentityOptions__User__MaxPasswordAge: 90
      IdentityOptions__User__RemindPasswordExpiryInDay: 7      
      # Authorize.Net settings
      Payments__AuthorizeNet__ApiLogin: 52B9X7vb4  
      # Skyflow settings
      Payments__Skyflow__tokenURI: https://manage.skyflowapis.com/v1/auth/sa/oauth/token
      Payments__Skyflow__vaultURI: https://ebfc9bee4242.vault.skyflowapis.com
      Payments__Skyflow__gatewayURI: https://ebfc9bee4242.gateway.skyflowapis.com
      Payments__Skyflow__vaultId: c1aeec61ad7c46c2b724f004a7658b2f
      Payments__Skyflow__tableName: credit_cards
      Payments__Skyflow__TargetPaymentMethod: AuthorizeNetPaymentMethod
      Payments__Skyflow__TargetConnectionRoute: gfb5ce07e91340efac348a2df035c513/xml/v1/request.api
      # Sync push notifications between platform instances
      PushNotifications__ForceWebSockets: true
      PushNotifications__ScalabilityMode: RedisBackplane
      PushNotifications__HubUrl: https://vcst-qa.govirto.com/pushNotificationHub?api_key=458ab7f7-df17-4aed-9f21-092f8b611efa
      PushNotifications__RedisBackplane__ChannelName: vcst-qa-chanel
      # Elastic App Search settings
      Search__ElasticAppSearch__Endpoint: https://enterprise-search-test.govirto.com
      Search__ElasticAppSearch__EnableHttpCompression: true
      # Elastic Search settings
      Search__ElasticSearch__Server: https://elasticsearch-vc03.govirto.com
      Search__ElasticSearch__EnableCompatibilityMode: true
      # VirtoCommerce Search settings
      Search__Provider: ElasticSearch
      # Prevent Hangfire duplication key error
      VirtoCommerce__Hangfire__SqlServerStorageOptions__TryAutoDetectSchemaDependentOptions: true
      VirtoCommerce__Hangfire__SqlServerStorageOptions__UseIgnoreDupKeyOption: true
      # Network share path where to upload files
      VirtoCommerce__LocalUploadFolderPath: wwwroot/cms-content
      # Sample data used if db is empty
      VirtoCommerce__SampleDataUrl: https://vc3prerelease.blob.core.windows.net/packages/clothing-and-electronics_3_0_2.zip
      # Temporary settings below
      Authorization__AccessTokenLifeTime: 00:30:00
      #Authorization__RefreshTokenLifeTime: 0:30:00
      Reload: 2024-07-31
    secretConfig:
      PushMessages__FcmSenderOptions__PrivateKey: fcm-private-key-new
      Notifications__SendGrid__ApiKey: sendgrid-apikey
      Payments__AuthorizeNet__TxnKey: authorizenet-txnkey
      Payments__AuthorizeNet__SHA2Hash: authorizenet-sha2hash
      Payments__Skyflow__PaymentFormAccount__clientID: skyflow-paymentformaccount-clientid
      Payments__Skyflow__PaymentFormAccount__keyID: skyflow-paymentformaccount-keyid
      Payments__Skyflow__PaymentFormAccount__privateKey: skyflow-paymentformaccount-privatekey
      Payments__Skyflow__IntegrationsAccount__clientID: skyflow-integrationsaccount-clientid
      Payments__Skyflow__IntegrationsAccount__keyID: skyflow-integrationsaccount-keyid
      Payments__Skyflow__IntegrationsAccount__privateKey: skyflow-integrationsaccount-privatekey
  storefront:
    enabled: false
    imageRepository: virtopaasregistrymain.azurecr.io/vcst/storefront
    servicePlan: B1
    probePath: /
    config:
      APPINSIGHTS_INSTRUMENTATIONKEY: 48cca1d8-ea02-433e-bfa6-7aa21acb88d9
      CookieAuthenticationOptions__LoginPath: /sign-in
      DOTNET_USE_POLLING_FILE_WATCHER: true
      SnapshotCollectorConfiguration__IsEnabled: false
      SYSTEM_RESTART: 25.10.2023
      VirtoCommerce__Endpoint__Password: Store12345
      VirtoCommerce__CacheSlidingExpiration: 0:0:5
    themes:
      B2B-store: https://vc3prerelease.blob.core.windows.net/packages/vc-theme-b2b-vue-2.0.0-pr-1136-1be8-1be89467.zip
  customApps:
    app1:
      name: storybook
      enabled: true
      imageRepository: ghcr.io/virtocommerce/vc-theme-b2b-vue-storybook
      servicePlan: F1
      type: standalone
      hostname: vcst-qa-storybook.govirto.com
      probePath: /
      ingressPath: /
    app2:
      enabled: false
  routes:
  - host: vcst-qa-storefront.govirto.com
    root: B2B-store
    paths:
    - path: /xapi
      route: platform
    - path: /files
      route: platform
    - path: /connect/token
      route: platform
    - path: /graphql
      route: platform
    - path: /revoke/token
      route: platform
    - path: /api/files
      route: platform
    - path: /externalsignin
      route: platform
    - path: /signin-oidc
      route: platform
  protectedParameters:
    - platform.image.tag
    #- storefront.image.tag
    - themes.B2B-store
    - custom.app1.image.tag
  version: 3.211
